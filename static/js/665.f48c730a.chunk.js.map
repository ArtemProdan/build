{"version":3,"file":"static/js/665.f48c730a.chunk.js","mappings":"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","sources":["components/GalleryCat/src/components/Card.js","components/GalleryCat/src/components/GalleryContent.js","components/GalleryCat/src/components/Comment.js","components/GalleryCat/src/components/PopupContent.js","components/GalleryCat/src/components/Popup.js","components/GalleryCat/src/components/GalleryCat.jsx"],"sourcesContent":["import React from 'react';\nimport { Preloader } from '../../../Common/Preloader';\n\nexport default function Card(props) {\n  const { card, ind, onCardClick } = props;\n\n  // const handleCardClick = () => {\n  //   onCardClick(card, ind);\n  // };\n\n  return (\n    <li className=\"item\" onClick={() => onCardClick(card, ind)}>\n      {!card.link ? <Preloader /> : (\n        <>\n          <img className=\"item__img\" src={card.link} alt={card.title} />\n          <div className=\"item__overlay\">\n            <p className=\"item__name\">{card.title}</p>\n          </div>\n        </>\n      )}\n    </li>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport Card from './Card';\n\nexport default function GalleryContent(props) {\n  const [loadedIndex, setLoadedIndex] = useState(-1); // Индекс последней загруженной картинки\n\n  useEffect(() => {\n    if (loadedIndex < props.cardList.length - 1) {\n      // Если не все картинки загружены, загружаем следующую картинку через задержку\n      const timeout = setTimeout(() => {\n        setLoadedIndex(loadedIndex + 1);\n      }, 250); // Задержка в миллисекундах между загрузкой картинок\n      return () => clearTimeout(timeout); // Очистка таймаута при размонтировании компонента\n    }\n  }, [loadedIndex, props.cardList]);\n\n  return (\n    <main className=\"contentCat\">\n      <section className=\"galleryCat content__section\">\n        <ul className=\"gallery__list\">\n          {props.cardList.slice(0, loadedIndex + 1).map((item, ind) => (\n            <Card key={item.id} card={item} ind={ind} onCardClick={props.onCardClick} />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n","import React from 'react'\n\nexport default function Comment ({comment}) {\n  return (\n    <div className=\"popup__comment\">\n      <p className=\"popup__text\">{comment.text}</p>\n      <p className=\"popup__date\">{comment.date}</p>\n    </div>\n  )\n}\n","import React from 'react'\nimport Comment from './Comment'\nimport send from '../../../../icons/send-paper.svg'\n\nexport default function PopupContent(props) {\n\n  const { card } = props\n\n  const [like, setLike] = React.useState(false)\n  const [comments, setComments] = React.useState([])\n\n  React.useEffect(() => {\n    setLike(card ? card.isLiked : false)\n  }, [card])\n\n  React.useEffect(() => {\n    setComments(card ? card.comments.reverse() : [])\n  }, [card])\n\n  const likeCard = () => {\n    setLike(!like)\n  }\n\n  const input = React.useRef()\n  const subBtn = React.useRef()\n\n  const setActiveInput = () => {\n    input.current.classList.add('active')\n    subBtn.current.classList.add('active')\n  }\n\n  const removeActiveInput = () => {\n    input.current.classList.remove('active')\n    subBtn.current.classList.remove('active')\n  }\n\n  const getCommentText = () => {\n    return input.current.value\n  }\n\n  const createComment = (evt) => {\n    evt.preventDefault()\n    const newText = getCommentText()\n    const date = new Date()\n    const newComment = { text: newText, date: `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}` }\n\n    setComments([...comments, newComment])\n    input.current.value = ''\n    removeActiveInput()\n  }\n\n  return (\n    <div className=\"popup__container\">\n      <img className=\"popup__img\" src={card ? card.link : ''} alt={card ? card.title : ''} />\n      <div className=\"popup__comments-section\">\n        <div className=\"popup__about\">\n          <h2 className=\"popup__title\">{card ? card.title : ''}</h2>\n          <div className=\"popup__rate\">\n            <p className=\"popup__count\">{card && like ? '1' : '0'}</p>\n            <button\n              type=\"button\"\n              aria-label=\"поставить лайк\"\n              className={`popup__like-btn ${card && like && 'popup__like-btn_liked'}`}\n              onClick={likeCard}\n            >\n            </button>\n          </div>\n        </div>\n\n        <div className=\"popup__comments\">\n          {card && comments.map((item, i) => (\n            <Comment key={i + 1} comment={item} />\n          ))}\n        </div>\n\n        <form name=\"form\" className=\"popup__form\" onSubmit={createComment}>\n          <textarea className='popup__input' ref={input} placeholder='Оставьте комменатарий'onClick={setActiveInput}/>\n\n          <button type=\"submit\" className=\"popup__sbmt_btn\" ref={subBtn}>\n            <img src={send} alt=\"send\" />\n          </button>\n        </form>\n\n      </div>\n    </div>\n  )\n}\n\n\n\n","import React from 'react'\nimport PopupContent from './PopupContent'\n\nexport default function Popup (props) { \n  const {card, onClose, prevCard, nextCard} = props\n  return (\n    <div className={`popup ${card && 'popup_opened'}`}>\n      <div className=\"pop_btn popup__prev\" onClick={prevCard}></div>\n      <div className=\"pop_btn popup__next\" onClick={nextCard}></div>\n      <button type=\"button\" className=\"popup__close_btn\" onClick={onClose}></button>\n\n      <PopupContent store={props.store} card={card} removeActiveInput={props.removeActiveInput} />\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react';\nimport GalleryContent from './GalleryContent';\nimport Popup from './Popup';\nimport '../css/IndexGalleryCat.css';\nimport { connect } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\n\nconst GalleryCat = (props) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [ind, setInd] = useState(null);\n\n  useEffect(() => {\n    setIsLoaded(true); // Устанавливаем значение isLoaded в true после полной загрузки\n  }, []);\n\n  const closePopup = () => {\n    setSelectedCard(null);\n  };\n\n  const handleCardClick = (card, i) => {\n    setSelectedCard(card);\n    setInd(i);\n  };\n\n  const handlePrevCard = () => {\n    setSelectedCard(props.cardList[ind - 1]);\n    setInd(ind - 1);\n  };\n\n  const handleNextCard = () => {\n    setSelectedCard(props.cardList[ind + 1]);\n    setInd(ind + 1);\n    props.removeActiveInput();\n  };\n\n  if (!props.isAuth) {\n    return <Navigate to='/login' />;\n  }\n\n  if (!isLoaded) {\n    return <h1>LOADING</h1>; // Если загрузка еще не завершена, возвращаем null для скрытия компонента\n  }\n\n  return (\n    <>\n      <GalleryContent onCardClick={handleCardClick} cardList={props.cardList} />\n      <Popup\n        card={selectedCard}\n        onClose={closePopup}\n        prevCard={handlePrevCard}\n        nextCard={handleNextCard}\n        removeActiveInput={props.removeActiveInput}\n        store={props.store}\n      />\n    </>\n  );\n};\n\nlet mapStateToProps = (state) => {\n  return {\n    isAuth: state.auth.isAuth,\n    cardList: state.cardList,\n  };\n};\n\nexport default connect(mapStateToProps, {})(GalleryCat);\n"],"names":["Card","props","card","ind","onCardClick","_jsx","className","onClick","children","link","_jsxs","_Fragment","src","alt","title","Preloader","GalleryContent","_useState","useState","_useState2","_slicedToArray","loadedIndex","setLoadedIndex","useEffect","cardList","length","timeout","setTimeout","clearTimeout","slice","map","item","id","Comment","_ref","comment","text","date","PopupContent","_React$useState","React","_React$useState2","like","setLike","_React$useState3","_React$useState4","comments","setComments","isLiked","reverse","input","subBtn","type","concat","i","name","onSubmit","evt","preventDefault","newText","current","value","Date","newComment","getDate","getMonth","getFullYear","_toConsumableArray","classList","remove","ref","placeholder","add","send","Popup","onClose","prevCard","nextCard","store","removeActiveInput","connect","state","isAuth","auth","isLoaded","setIsLoaded","_useState3","_useState4","selectedCard","setSelectedCard","_useState5","_useState6","setInd","Navigate","to"],"sourceRoot":""}